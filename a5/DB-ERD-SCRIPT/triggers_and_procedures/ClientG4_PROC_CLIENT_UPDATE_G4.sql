DELIMITER //
CREATE PROCEDURE `CUSTOMER_UPDATE_G4`(IN inClientCompIdG4 INT(11), IN inClientCompNameG4 VARCHAR(255), IN inClientCityG4  VARCHAR(255), IN inClientCompPasswordG4 VARCHAR(255), IN inMoneyOwedG4 decimal(19,4))
BEGIN
	-- DEFINE AN ERROR HANDLING. FIRST ROLLBACK THEN RETHROW THE ERROR TO THE REQUESTOR APPLICATION.
    DECLARE EXIT HANDLER FOR SQLEXCEPTION, SQLWARNING, NOT FOUND
    BEGIN
		ROLLBACK;
        RESIGNAL;
	END;
    -- TRANSACTION
	START TRANSACTION;
    IF ISNULL(inClientCompIdG4) OR ISNULL(inClientCompNameG4) OR ISNULL(inClientCityG4) OR ISNULL(inClientCompPasswordG4) OR ISNULL(inMoneyOwedG4) THEN
		-- USER DEFINED ERROR (NULL VALUE IS NOT ACCEPTED).
		SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT='Null value is not accepted.';
    ELSE
    -- UPDATE THE INFORMATION IN THE CLIENTG4 TABLE.
    UPDATE ClientG4 SET moneyOwedG4=inMoneyOwedG4, clientCompNameG4=inClientCompNameG4,
			clientCityG4=inClientCityG4, clientCompPasswordG4=inClientCompPasswordG4 WHERE clientCompIdG4=inClientCompIdG4;
	-- RETURN THE UPDATED INFORMATION BACK TO THE REQUESTOR.
	SELECT * FROM ClientG4 WHERE clientCompIdG4=inClientCompIdG4;
    END IF;
    -- COMMIT THE ENTIRE CHANGE.
    COMMIT;
END //
DELIMITER ;